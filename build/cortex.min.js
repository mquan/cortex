!function e(t,i,n){function a(s,u){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!u&&l)return l(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var o=i[s]={exports:{}};t[s][0].call(o.exports,function(e){var i=t[s][1][e];return a(i?i:e)},o,o.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(e,t){"use strict";var i=function(e,t,i){t&&Object.defineProperties(e,t),i&&Object.defineProperties(e.prototype,i)},n=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.exports=function(){var t=e("./pubsub"),r=e("./data_wrapper")(t),s={N:"new",E:"update",A:"update",D:"delete"},u=function(e){function r(e,t){a(this,r),this.__value=e,this.__path=[],this.__updates=[],this.__callbacks=t?[t]:[],this.__loopProcessing=!1,this.__subscribe(),this.__changes=[],this.__wrap()}return n(r,e),i(r,null,{on:{value:function(e,t){"update"===e&&this.__callbacks.push(t)},writable:!0,configurable:!0},off:{value:function(e,t){if("update"===e)if(t){for(var i=0,n=this.__callbacks.length;n>i;i++)if(t===this.__callbacks[i]){this.__callbacks.splice(i,1);break}}else this.__callbacks=[]},writable:!0,configurable:!0},update:{value:function(e){return this.__checkUpdate(e.oldValue,e.value,e.path)?(this.__loopProcessing||(this.__loopProcessing=!0,setTimeout(this.__batchAll.bind(this),0)),!0):!1},writable:!0,configurable:!0},__batchAll:{value:function(){this.__batchSetValue(),this.__wrap(),this.__loopProcessing=!1,this.__runCallbacks()},writable:!0,configurable:!0},__batchSetValue:{value:function(){for(var e=0,t=this.__updates.length;t>e;e++)this.__setValue(this.__updates[e].newValue,this.__updates[e].path);this.__updates=[]},writable:!0,configurable:!0},__runCallbacks:{value:function(){for(var e=0,t=this.__callbacks.length;t>e;e++)this.__callbacks[e]&&this.__callbacks[e](this)},writable:!0,configurable:!0},__subscribe:{value:function(){this.__eventId=t.subscribeToCortex(function(e,t){this.update(t)}.bind(this),function(e,t){this.__remove(t.path)}.bind(this))},writable:!0,configurable:!0},__remove:{value:function(e){if(e.length){var t=e.slice(0,e.length-1),i=this.__subValue(t),n=e[e.length-1],a=i[n],r=this.__clone(i);return i.constructor===Object?delete i[n]:i.constructor===Array&&i.splice(n,1),this.update({value:i,path:t,oldValue:r}),a}delete this.__wrappers,delete this.__value},writable:!0,configurable:!0},__setValue:{value:function(e,t){if(t.length>1){var i=this.__subValue(t.slice(0,t.length-1));i[t[t.length-1]]=e}else 1===t.length?this.__value[t[0]]=e:this.__value=e},writable:!0,configurable:!0},__checkUpdate:{value:function(e,t,i){var n;if(e)return n=this.__diff(e,t),this.__computeChanges(n,i),!0;var e=this.__subValue(i);return n=this.__diff(e,t),n?(this.__updates.push({newValue:t,path:i}),this.__computeChanges(n,i),!0):!1},writable:!0,configurable:!0},__computeChanges:{value:function(e,t){var i,n,a;this.__loopProcessing||(this.__changes=[]);for(var r=0,u=e.length;u>r;r++)a=e[r],i=s[a.item?a.item.kind:a.kind],n=t,a.path&&(n=n.concat(a.path)),a.index&&n.push(a.index),this.__changes.push({type:i,path:n,oldValue:a.item?a.item.lhs:a.lhs,newValue:a.item?a.item.rhs:a.rhs})},writable:!0,configurable:!0}}),r}(r);return"undefined"!=typeof window&&null!==window&&(window.Cortex=u),u}()},{"./data_wrapper":3,"./pubsub":4}],2:[function(e,t,i){(function(e){!function(n){"use strict";function a(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function s(e,t,i){s.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:i,enumerable:!0})}function u(e,t){u.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function l(e,t){l.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function h(e,t,i){h.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:i,enumerable:!0})}function o(e,t,i){var n=e.slice((i||t)+1||e.length);return e.length=0>t?e.length+t:t,e.push.apply(e,n),e}function c(e,t,i,a,r,_,f){r=r||[];var p=r.slice(0);if("undefined"!=typeof _){if(a&&a(p,_))return;p.push(_)}var b=typeof e,v=typeof t;if("undefined"===b)"undefined"!==v&&i(new u(p,t));else if("undefined"===v)i(new l(p,e));else if(b!==v)i(new s(p,e,t));else if(e instanceof Date&&t instanceof Date&&e-t!==0)i(new s(p,e,t));else if("object"===b&&null!==e&&null!==t){if(f=f||[],f.indexOf(e)<0){if(f.push(e),Array.isArray(e)){{var d;e.length}for(d=0;d<e.length;d++)d>=t.length?i(new h(p,d,new l(n,e[d]))):c(e[d],t[d],i,a,p,d,f);for(;d<t.length;)i(new h(p,d,new u(n,t[d++])))}else{var w=Object.keys(e),g=Object.keys(t);w.forEach(function(r){var s=g.indexOf(r);s>=0?(c(e[r],t[r],i,a,p,r,f),g=o(g,s)):c(e[r],n,i,a,p,r,f)}),g.forEach(function(e){c(n,t[e],i,a,p,e,f)})}f.length=f.length-1}}else e!==t&&("number"===b&&isNaN(e)&&isNaN(t)||i(new s(p,e,t)))}function _(e,t,i,a){return a=a||[],c(e,t,function(e){e&&a.push(e)},i),a.length?a:n}function f(e,t,i){if(i.path&&i.path.length){var n,a=e[t],r=i.path.length-1;for(n=0;r>n;n++)a=a[i.path[n]];switch(i.kind){case"A":f(a[i.path[n]],i.index,i.item);break;case"D":delete a[i.path[n]];break;case"E":case"N":a[i.path[n]]=i.rhs}}else switch(i.kind){case"A":f(e[t],i.index,i.item);break;case"D":e=o(e,t);break;case"E":case"N":e[t]=i.rhs}return e}function p(e,t,i){if(e&&t&&i&&i.kind){for(var n=e,a=-1,r=i.path.length-1;++a<r;)"undefined"==typeof n[i.path[a]]&&(n[i.path[a]]="number"==typeof i.path[a]?new Array:{}),n=n[i.path[a]];switch(i.kind){case"A":f(n[i.path[a]],i.index,i.item);break;case"D":delete n[i.path[a]];break;case"E":case"N":n[i.path[a]]=i.rhs}}}function b(e,t,i){if(i.path&&i.path.length){var n,a=e[t],r=i.path.length-1;for(n=0;r>n;n++)a=a[i.path[n]];switch(i.kind){case"A":b(a[i.path[n]],i.index,i.item);break;case"D":a[i.path[n]]=i.lhs;break;case"E":a[i.path[n]]=i.lhs;break;case"N":delete a[i.path[n]]}}else switch(i.kind){case"A":b(e[t],i.index,i.item);break;case"D":e[t]=i.lhs;break;case"E":e[t]=i.lhs;break;case"N":e=o(e,t)}return e}function v(e,t,i){if(e&&t&&i&&i.kind){var n,a,r=e;for(a=i.path.length-1,n=0;a>n;n++)"undefined"==typeof r[i.path[n]]&&(r[i.path[n]]={}),r=r[i.path[n]];switch(i.kind){case"A":b(r[i.path[n]],i.index,i.item);break;case"D":r[i.path[n]]=i.lhs;break;case"E":r[i.path[n]]=i.lhs;break;case"N":delete r[i.path[n]]}}}function d(e,t,i){if(e&&t){var n=function(n){(!i||i(e,t,n))&&p(e,t,n)};c(e,t,n)}}var w,g,y=[];w="object"==typeof e&&e?e:"undefined"!=typeof window?window:{},g=w.DeepDiff,g&&y.push(function(){"undefined"!=typeof g&&w.DeepDiff===_&&(w.DeepDiff=g,g=n)}),a(s,r),a(u,r),a(l,r),a(h,r),Object.defineProperties(_,{diff:{value:_,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:d,enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:v,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof g},enumerable:!0},noConflict:{value:function(){return y&&(y.forEach(function(e){e()}),y=null),_},enumerable:!0}}),"undefined"!=typeof t&&t&&"object"==typeof i&&i&&t.exports===i?t.exports=_:w.DeepDiff=_}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t){"use strict";var i=function(e,t,i){t&&Object.defineProperties(e,t),i&&Object.defineProperties(e.prototype,i)},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.exports=function(t){var a=e("deep-diff").diff,r=function(){function e(t){n(this,e),this.__eventId=t.eventId,this.__value=t.value,this.__path=t.path||[],this.__changes=t.changes||[],this.__wrap(),this.val=this.getValue}return i(e,null,{set:{value:function(e,i){var n=i||{};n.value=e,n.path=this.__path,t.publish("update"+this.__eventId,n)},writable:!0,configurable:!0},getValue:{value:function(){return this.__value},writable:!0,configurable:!0},getPath:{value:function(){return this.__path},writable:!0,configurable:!0},getKey:{value:function(){return this.__path[this.__path.length-1]},writable:!0,configurable:!0},getChanges:{value:function(){return this.__changes},writable:!0,configurable:!0},didChange:{value:function(e){if(!e)return this.__changes.length>0;for(var t=0,i=this.__changes.length;i>t;t++){var n=this.__changes[t];if(n.path[0]===e||this.__hasChange(n,e))return!0}return!1},writable:!0,configurable:!0},forEach:{value:function(e){if(this.__isObject())for(var t in this.__wrappers)e(t,this.__wrappers[t],this.__wrappers);else this.__isArray()&&this.__wrappers.forEach(e)},writable:!0,configurable:!0},remove:{value:function(){t.publish("remove"+this.__eventId,{path:this.__path})},writable:!0,configurable:!0},__subValue:{value:function(e){for(var t=this.__value,i=0,n=e.length;n>i;i++)t=t[e[i]];return t},writable:!0,configurable:!0},__wrap:{value:function(){if(this.__cleanup(),this.__isObject()){this.__wrappers={};for(var e in this.__value)this.__wrapChild(e)}else if(this.__isArray()){this.__wrappers=[];for(var t=0,i=this.__value.length;i>t;t++)this.__wrapChild(t)}},writable:!0,configurable:!0},__wrapChild:{value:function(t){var i=this.__path.slice();i.push(t),this.__wrappers[t]=new e({value:this.__value[t],path:i,eventId:this.__eventId,changes:this.__childChanges(t)}),this[t]=this.__wrappers[t]},writable:!0,configurable:!0},__childChanges:{value:function(e){for(var t,i=[],n=0,a=this.__changes.length;a>n;n++){if(t=this.__changes[n],t.path[0]===e){i.push({type:t.type,path:t.path.slice(1,t.path.length),oldValue:t.oldValue,newValue:t.newValue});break}if(this.__hasChange(t,e)){i.push({type:t.type,path:[],oldValue:t.oldValue?t.oldValue[e]:void 0,newValue:t.newValue?t.newValue[e]:void 0});break}}return i},writable:!0,configurable:!0},__hasChange:{value:function(e,t){return 0===e.path.length&&(e.oldValue&&e.oldValue[t]||e.newValue&&e.newValue[t])},writable:!0,configurable:!0},__cleanup:{value:function(){if(this.__wrappers){if(this.__isObject())for(var e in this.__wrappers)delete this[e];else if(this.__isArray())for(var t=0,i=this.__wrappers.length;i>t;t++)delete this[t];delete this.__wrappers}},writable:!0,configurable:!0},__isObject:{value:function(){return this.__value&&this.__value.constructor===Object},writable:!0,configurable:!0},__isArray:{value:function(){return this.__value&&this.__value.constructor===Array},writable:!0,configurable:!0},__diff:{value:function(e,t){return a(e,t)},writable:!0,configurable:!0},__clone:{value:function(e){var t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return t=new Date,t.setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var i=0,n=e.length;n>i;i++)t[i]=this.__clone(e[i]);return t}if(e instanceof Object){t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=this.__clone(e[a]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")},writable:!0,configurable:!0}}),e}(),s=e("./wrappers/array"),u=e("./wrappers/hash"),l=function(e,t){for(var i=0,n=t.length;n>i;i++)for(var a in t[i])e.prototype[a]=t[i][a]};return l(r,[s,u]),r}},{"./wrappers/array":5,"./wrappers/hash":6,"deep-diff":2}],4:[function(e,t){"use strict";var i=function(e,t,i){t&&Object.defineProperties(e,t),i&&Object.defineProperties(e.prototype,i)},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.exports=function(){var e=function(){function e(){n(this,e),this.uid=-1,this.topics={}}return i(e,null,{subscribe:{value:function(e,t){this.topics.hasOwnProperty(e)||(this.topics[e]=[]),this.topics[e].push({callback:t})},writable:!0,configurable:!0},publish:{value:function(e,t){if(!this.topics.hasOwnProperty(e))return!1;for(var i=this.topics[e],n=0,a=i.length;a>n;n++)i[n].callback(e,t);return!0},writable:!0,configurable:!0},subscribeToCortex:{value:function(e,t){return this.uid+=1,this.subscribe("update"+this.uid,e),this.subscribe("remove"+this.uid,t),this.uid},writable:!0,configurable:!0},unsubscribeFromCortex:{value:function(e){delete this.topics["update"+e],delete this.topics["remove"+e]},writable:!0,configurable:!0}}),e}();return new e}()},{}],5:[function(e,t){"use strict";var i={count:function(){return this.__value.length},map:function(e){return this.__wrappers.map(e)},filter:function(e,t){return this.__wrappers.filter(e,t)},find:function(e){for(var t=0,i=this.__wrappers.length;i>t;t++)if(e(this.__wrappers[t],t,this.__wrappers))return this.__wrappers[t];return null},findIndex:function(e){for(var t=0,i=this.__wrappers.length;i>t;t++)if(e(this.__wrappers[t],t,this.__wrappers))return t;return-1},push:function(e){var t=this.__clone(this.__value),i=this.__value.push(e);return this.set(this.__value,{oldValue:t}),i},pop:function(){var e=this.__clone(this.__value),t=this.__value.pop();return this.set(this.__value,{oldValue:e}),t},unshift:function(e){var t=this.__clone(this.__value),i=this.__value.unshift(e);return this.set(this.__value,{oldValue:t}),i},shift:function(){var e=this.__clone(this.__value),t=this.__value.shift();return this.set(this.__value,{oldValue:e}),t},insertAt:function(e,t){var i=this.__clone(this.__value),n=[e,0].concat(t);Array.prototype.splice.apply(this.__value,n),this.set(this.__value,{oldValue:i})},removeAt:function(e){var t=void 0===arguments[1]?1:arguments[1],i=this.__clone(this.__value),n=this.__value.splice(e,t);return this.set(this.__value,{oldValue:i}),n}};t.exports=i},{}],6:[function(e,t){"use strict";var i={keys:function(){return Object.keys(this.__value)},values:function(){var e,t=[];for(e in this.__value)t.push(this.__value[e]);return t},hasKey:function(e){return null!=this.__value[e]},destroy:function(e){var t=this.__clone(this.__value),i=this.__value[e];return delete this.__value[e],this.set(this.__value,{oldValue:t}),i},add:function(e,t){var i=this.__clone(this.__value);return this.__value[e]=t,this.set(this.__value,{oldValue:i}),t}};t.exports=i},{}]},{},[1]);