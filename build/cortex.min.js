!function t(e,r,i){function s(o,u){if(!r[o]){if(!e[o]){var p="function"==typeof require&&require;if(!u&&p)return p(o,!0);if(n)return n(o,!0);throw new Error("Cannot find module '"+o+"'")}var a=r[o]={exports:{}};e[o][0].call(a.exports,function(t){var r=e[o][1][t];return s(r?r:t)},a,a.exports,t,e,r,i)}return r[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,e){var r=function(t,e){for(var r=0,i=e.length;i>r;r++)for(var s in e[r])t.prototype[s]=e[r][s]};e.exports=function(t,e){function i(t,e,r){this.eventId=r,this.value=t,this.path=e||[],this._wrap()}return i.prototype.set=function(t,r){e.publish("update"+this.eventId,{value:t,path:this.path,forceUpdate:r})},i.prototype.get=function(t){return this.wrappers[t]},i.prototype.getValue=function(){return this.value},i.prototype.getPath=function(){return this.path},i.prototype.getKey=function(){return this.path[this.path.length-1]},i.prototype.forEach=function(t){if(this._isObject())for(var e in this.wrappers)t(e,this.wrappers[e],this.wrappers);else this._isArray()&&this.wrappers.forEach(t)},i.prototype.remove=function(){e.publish("remove"+this.eventId,{path:this.path})},i.prototype._wrap=function(){delete this.wrappers;var t;if(this._isObject()){this.wrappers={};for(var e in this.value)t=this.path.slice(),t.push(e),this.wrappers[e]=new i(this.value[e],t,this.eventId)}else if(this._isArray()){this.wrappers=[];for(var r=0,s=this.value.length;s>r;r++)t=this.path.slice(),t.push(r),this.wrappers.push(new i(this.value[r],t,this.eventId))}},i.prototype._forceUpdate=function(){this.set(this.value,!0)},i.prototype._isObject=function(){return this.value.constructor==Object},i.prototype._isArray=function(){return this.value.constructor==Array},r(i,t),i}},{}],2:[function(t,e){var r=t("./pubsub"),i=t("./wrappers/array"),s=t("./wrappers/hash"),n=t("./data_wrapper")([i,s],r),o={}.hasOwnProperty,u=function(t,e){function r(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p=function(t,e){function r(t,e){this.value=t,this.path=[],this.callback=e,this._subscribe(),this._wrap()}return u(r,t),r.prototype.update=function(t,e,r){return r||this._shouldUpdate(t,e)?(this._setValue(t,e),this._wrap(),this.callback?this.callback(this):void 0):!1},r.prototype._subscribe=function(){this.eventId=e.subscribeToCortex(function(t,e){this.update(e.value,e.path,e.forceUpdate)}.bind(this),function(t,e){this._remove(e.path)}.bind(this))},r.prototype._remove=function(t){if(t.length){var e=t.slice(0,t.length-1),r=this._subValue(e),i=t[t.length-1],s=r[i];return r.constructor==Object?delete r[i]:r.constructor==Array&&r.splice(i,1),this.update(r,e,!0),s}delete this.wrappers,delete this.value},r.prototype._setValue=function(t,e){if(e.length>1){var r=this._subValue(e.slice(0,e.length-1));r[e[e.length-1]]=t}else 1==e.length?this.value[e[0]]=t:this.value=t},r.prototype._subValue=function(t){for(var e=this.value,r=0,i=t.length;i>r;r++)e=e[t[r]];return e},r.prototype._shouldUpdate=function(t,e){for(var r=this.value,i=0,s=e.length;s>i;i++)r=r[e[i]];return this._isDifferent(r,t)},r.prototype._isDifferent=function(t,e){if(t.constructor==Object){if(e.constructor!=Object||this._isDifferent(Object.keys(t).sort(),Object.keys(e).sort()))return!0;for(var r in t)if(this._isDifferent(t[r],e[r]))return!0}else{if(t.constructor!=Array)return t!=e;if(e.constructor!=Array||t.length!=e.length)return!0;for(var i=0,s=t.length;s>i;i++)if(this._isDifferent(t[i],e[i]))return!0}},r}(n,r);"undefined"!=typeof window&&null!==window&&(window.Cortex=p),e.exports=p},{"./data_wrapper":1,"./pubsub":3,"./wrappers/array":4,"./wrappers/hash":5}],3:[function(t,e){var r=function(){function t(){this.uid=-1,this.topics={}}return t.prototype.subscribe=function(t,e){this.topics.hasOwnProperty(t)||(this.topics[t]=[]),this.topics[t].push({callback:e})},t.prototype.publish=function(t,e){if(!this.topics.hasOwnProperty(t))return!1;var r=this.topics[t],i=function(){for(var i=0,s=r.length;s>i;i++)r[i].callback(t,e)};return i(),!0},t.prototype.subscribeToCortex=function(t,e){return this.uid+=1,this.subscribe("update"+this.uid,t),this.subscribe("remove"+this.uid,e),this.uid},t.prototype.unsubscribeFromCortex=function(t){delete this.topics["update"+t],delete this.topics["remove"+t]},t}();e.exports=new r},{}],4:[function(t,e){var r={count:function(){return this.value.length},map:function(t){return this.wrappers.map(t)},find:function(t){for(var e=0,r=this.wrappers.length;r>e;e++)if(t(this.wrappers[e],e,this.wrappers))return this.wrappers[e];return null},findIndex:function(t){for(var e=0,r=this.wrappers.length;r>e;e++)if(t(this.wrappers[e],e,this.wrappers))return e;return-1},push:function(t){var e=this.value.push(t);return this._forceUpdate(),e},pop:function(){var t=this.value.pop();return this._forceUpdate(),t},insertAt:function(t,e){var r=[t,0].concat(e);Array.prototype.splice.apply(this.value,r),this._forceUpdate()},removeAt:function(t,e){null==e&&(e=1);var r=this.value.splice(t,e);return this._forceUpdate(),r}};e.exports=r},{}],5:[function(t,e){var r={keys:function(){return Object.keys(this.value)},values:function(){var t,e=[];for(t in this.value)e.push(this.value[t]);return e},hasKey:function(t){return null!=this.value[t]},"delete":function(t){var e=this.value[t];return delete this.value[t],this.set(this.value,!0),e}};e.exports=r},{}]},{},[2]);